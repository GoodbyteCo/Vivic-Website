---
import Main from "../layouts/Main.astro";
import { getCollection } from "astro:content";
import OurWork from "../components/OurWork.astro";

const data = await getCollection('services') 

const services: { title: string; order: number }[] = data.map((service) => {
	return {
		title: service.data.title,
		order: service.data.order,
	};
});
---

<Main title="Vivic Research">
	<section id="hero">
		<h1>Today. Tomorrow. Together.</h1>
		<p>
			Vivic Research is an economic and public policy research firm
			dedicated to supporting actors working towards systems change with
			evidence-based research.
		</p>
	</section>
	<section id="services">
		<h2>
			<a href="/services">Our Services</a>
		</h2>
		<div class="pillars">
			{
				services
					.sort((a, b) => a.order - b.order)
					.map((service) => (
						<section>
							<h3>{service.title}</h3>
						</section>
					))
			}
		</div>
		<OurWork />
	</section>
</Main>

<style>
	#services {
		max-width: 1500px;
		margin: 0 auto 75px auto;
	}

	#hero {
		margin: 325px 8% 155px 8%;
		width: 65%;
	}

	h1 {
		font-weight: 200;
		font-size: 3.2rem;
		letter-spacing: 0.08em;
		text-transform: uppercase;
	}

	#hero p {
		width: 75%;
		font-weight: 100;
		font-size: 1.2rem;
	}

	h2 {
		font-size: 2.3rem;
		text-align: center;
	}

	h2 a {
		display: block;
		text-decoration: none;
		color: var(--white);
		max-width: 8ch;
		max-width: max-content;
		margin: auto;
		text-align: center;
	}

	h2 a::after {
		content: "";
		margin-top: 0.3rem;
		display: block;
		width: 0;
		opacity: 0.7;
		height: 2px;
		background: var(--white);
		transition: width 0.3s;
	}

	h2 a:hover::after {
		opacity: 1;
		width: 100%;
	}

	.pillars {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: 25px;
		padding: 25px;
		margin-bottom: 5rem;
		align-items: center;
		justify-items: stretch;
		transform: translateZ(-1);
	}

	.pillars section {
		clip-path: polygon(0 7%, 100% 0, 100% 93%, 0 100%);
		padding: 3rem 2.8rem;
		color: var(--black);
		display: flex;
		justify-content: center;
		justify-self: center;
		align-items: center;
		width: 150px;
		height: 150px;
	}

	.pillars section:nth-child(4n + 1) {
		background: linear-gradient(to right, #f783a7, #fcd5e1);
	}

	.pillars section:nth-child(4n + 2) {
		background: linear-gradient(to right, #fcd5e1, #fff);
	}
	.pillars section:nth-child(4n + 3) {
		background: linear-gradient(to right, #fff, #def8f8);
	}
	.pillars section:nth-child(4n + 4) {
		background: linear-gradient(to right, #def8f8, #9eecec);
	}

	.pillars h3 {
		font-size: 1.2rem;
		text-align: center;
		margin: 2rem 0;
	}

	.pillars p {
		line-height: 1.8;
	}

	@media screen and (max-width: 1250px) {
		.pillars {
			grid-template-columns: repeat(2, 1fr);
			justify-items: center;
		}

		.pillars section {
			width: 250px;
		}

		.pillars section:nth-child(odd) {
			background: linear-gradient(to right, #f783a7, #ffffff);
		}

		.pillars section:nth-child(even) {
			background: linear-gradient(to right, #ffffff, #9eecec);
		}
	}

	@media screen and (max-width: 1050px) {
		.pillars {
			display: block;
		}

		.pillars section {
			max-width: unset;
			min-height: unset;
			width: unset;
			height: unset;
			margin-top: 5px !important;
			padding: 2.5rem 1.2rem 3rem;
		}

		.pillars section:nth-child(1) {
			background: linear-gradient(to bottom, #f783a7, #f9a2bd);
		}

		.pillars section:nth-child(2) {
			background: linear-gradient(to bottom, #f9a2bd, #fbc1d3);
		}

		.pillars section:nth-child(3) {
			background: linear-gradient(to bottom, #fbc1d3, #fde0e9);
		}

		.pillars section:nth-child(4) {
			background: linear-gradient(to bottom, #fde0e9, #ffffff);
		}

		.pillars section:nth-child(5) {
			background: linear-gradient(to bottom, #ffffff, #e7fafa);
		}

		.pillars section:nth-child(6) {
			background: linear-gradient(to bottom, #e7fafa, #cff6f6);
		}

		.pillars section:nth-child(7) {
			background: linear-gradient(to bottom, #cff6f6, #b6f1f1);
		}

		.pillars section:nth-child(8) {
			background: linear-gradient(to bottom, #b6f1f1, #9eecec);
		}
	}

	@media screen and (max-width: 420px) {
		h1 {
			font-size: 2.8rem;
		}
	}

	@media screen and (max-width: 350px) {
		h1 {
			font-size: 2.3rem;
		}
	}
</style>
